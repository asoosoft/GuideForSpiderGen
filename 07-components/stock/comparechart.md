# CompareChart

<figure><img src="../../.gitbook/assets/스크린샷 2025-07-02 150719.png" alt=""><figcaption></figcaption></figure>

업비트의 REST API와 WebSocket을 활용하여 종목 데이터, 캔들, 호가 등 다양한 데이터를 실시간으로 수집 및 표시하는 프레임워크.

***

### Appearance

공통 Appearance 는 [**6. Global Properties**](<../../Guide for SpiderGen/06  SpiderGen Editor/04  Properties Pane/02 Appearence.md>) 속성을 참고

### Attribute

CompareChart 속성

<figure><img src="../../.gitbook/assets/스크린샷 2025-06-30 163755.png" alt=""><figcaption></figcaption></figure>

**Data**

<table data-header-hidden><thead><tr><th width="361"></th><th></th></tr></thead><tbody><tr><td><strong>이름</strong></td><td><strong>설명</strong></td></tr><tr><td><strong>색상 속성</strong></td><td></td></tr><tr><td><code>Text</code></td><td>차트 내 텍스트(레이블, 축 값, 날짜 등)에 적용되는 색상</td></tr><tr><td><code>Divide Line</code></td><td>메인 영역과 오른쪽 값 영역을 구분하는 기준선의 색상</td></tr><tr><td><code>Up</code></td><td>상승 시 표시되는 색상</td></tr><tr><td><code>Down</code></td><td>하락시 표시되는 색상</td></tr><tr><td><code>Dot</code></td><td>배경 점선(Grid Line)에 적용되는 색상</td></tr></tbody></table>

### Example

**1. 프로젝트 생성**

* 프로젝트 트리뷰에서 Source > MainView.lay 파일을 클릭
* MainView의 레이아웃 파일이 오픈되면 컴포넌트 리스트에서 CompareChart 컴포넌트를 선택하고 드래그하여 레이아웃에 배치
* Class에서 ID를 compareChart 로 입력

**2. 데이터 설정**

* 먼저 MainView.js 파일을 오픈
* 상단의 파일탭에서 MainView.lay 탭을 더블 클릭하거나 우측의 프로젝트 트리에서 MainView.js 파일을 더블 클릭
* 모든 화면뷰는 onInitDone() 함수가 존재하며 이 함수는 화면이 생성될 때 딱 한번 실행
* onInitDone() 함수에서 레이블의 텍스트 내용을 아래와 같이 코드를 입력

```javascript
onInitDone() {
    super.onInitDone();

    const baseData = [
        ['20250701', 100, 111, 94, 105, 1000, 105000],
        ['20250702', 107, 117, 104, 112, 1230, 137760],
        ['20250703', 112, 124, 108, 117, 1510, 176670],
        ['20250704', 118, 128, 115, 121, 1690, 204490],
        ['20250705', 120, 133, 117, 130, 1930, 250900],
        ['20250706', 131, 139, 126, 135, 2090, 282150],
        ['20250707', 136, 145, 131, 140, 2260, 316400],
        ['20250708', 141, 149, 136, 143, 2330, 333190],
        ['20250709', 144, 151, 140, 146, 2420, 353320],
        ['20250710', 147, 153, 145, 149, 2560, 381440],
        ['20250711', 103, 113, 96, 108, 1080, 116640],
        ['20250712', 109, 118, 105, 114, 1270, 144780],
        ['20250713', 113, 124, 109, 118, 1560, 184080],
        ['20250714', 119, 129, 116, 123, 1700, 209100],
        ['20250715', 122, 134, 121, 131, 1960, 256760],
        ['20250716', 134, 141, 129, 137, 2070, 283590],
        ['20250717', 138, 146, 135, 142, 2190, 310980],
        ['20250718', 143, 149, 140, 145, 2280, 330600],
        ['20250719', 146, 152, 144, 148, 2390, 353720],
        ['20250720', 149, 155, 147, 153, 2620, 401460],
        ['20250721', 104, 115, 98, 109, 1120, 122080],
        ['20250722', 110, 120, 106, 115, 1320, 151800],
        ['20250723', 114, 125, 110, 119, 1580, 188020],
        ['20250724', 120, 130, 117, 124, 1740, 215760],
        ['20250725', 124, 135, 123, 132, 1990, 262680],
        ['20250726', 135, 143, 130, 137, 2110, 289070],
        ['20250727', 139, 147, 136, 142, 2240, 318080],
        ['20250728', 144, 151, 141, 145, 2320, 336400],
        ['20250729', 147, 153, 144, 148, 2430, 359640],
        ['20250730', 150, 157, 148, 154, 2650, 408100],
    ];

    const compareData = [
        200, 206, 213, 219, 225, 231, 236, 241, 245, 248,
        252, 257, 261, 265, 270, 274, 278, 281, 285, 289,
        292, 295, 298, 301, 304, 307, 309, 311, 313, 315
    ];

    this.compareChart.setData(baseData);
    this.compareChart.addCompareData(['삼성전자', compareData]);

    this.compareChart.lineDataColor = ['#00cfff', '#ff8800'];
}
```

**3. 프로젝트 실행**

<figure><img src="../../.gitbook/assets/화면 녹화 중 2025-07-03 090803.gif" alt=""><figcaption></figcaption></figure>

* 설정한 데이터에 맞춰서 캔들 차트와 비교선의 레이아웃 생성



**4. 코드로 CompareChart 생성**

* 먼저 MainView.js 파일을 오픈
* onInitDone() 함수에서 아래와 같이 코드를 입력

```javascript
    onInitDone() {
        super.onInitDone();

        // CompareChart 생성 및 초기화
        const compareChart = new CompareChart();
        compareChart.init();

        // 화면에 추가
        this.addComponent(compareChart);
        compareChart.setSize(800, 500);   // 크기 설정
        compareChart.setPos(100, 100);    // 위치 설정

        // 차트 데이터 (예시: 30일치 OHLCV 데이터)
        const baseData = [
            ['20250701', 100, 111, 94, 105, 1000, 105000],
            ['20250702', 107, 117, 104, 112, 1230, 137760],
            ['20250703', 112, 124, 108, 117, 1510, 176670],
            ['20250704', 118, 128, 115, 121, 1690, 204490],
            ['20250705', 120, 133, 117, 130, 1930, 250900],
            ['20250706', 131, 139, 126, 135, 2090, 282150],
            ['20250707', 136, 145, 131, 140, 2260, 316400],
            ['20250708', 141, 149, 136, 143, 2330, 333190],
            ['20250709', 144, 151, 140, 146, 2420, 353320],
            ['20250710', 147, 153, 145, 149, 2560, 381440],
            ['20250711', 103, 113, 96, 108, 1080, 116640],
            ['20250712', 109, 118, 105, 114, 1270, 144780],
            ['20250713', 113, 124, 109, 118, 1560, 184080],
            ['20250714', 119, 129, 116, 123, 1700, 209100],
            ['20250715', 122, 134, 121, 131, 1960, 256760],
            ['20250716', 134, 141, 129, 137, 2070, 283590],
            ['20250717', 138, 146, 135, 142, 2190, 310980],
            ['20250718', 143, 149, 140, 145, 2280, 330600],
            ['20250719', 146, 152, 144, 148, 2390, 353720],
            ['20250720', 149, 155, 147, 153, 2620, 401460],
            ['20250721', 104, 115, 98, 109, 1120, 122080],
            ['20250722', 110, 120, 106, 115, 1320, 151800],
            ['20250723', 114, 125, 110, 119, 1580, 188020],
            ['20250724', 120, 130, 117, 124, 1740, 215760],
            ['20250725', 124, 135, 123, 132, 1990, 262680],
            ['20250726', 135, 143, 130, 137, 2110, 289070],
            ['20250727', 139, 147, 136, 142, 2240, 318080],
            ['20250728', 144, 151, 141, 145, 2320, 336400],
            ['20250729', 147, 153, 144, 148, 2430, 359640],
            ['20250730', 150, 157, 148, 154, 2650, 408100],
        ];

        // 비교 종목 데이터
        const compareData = [
            200, 206, 213, 219, 225, 231, 236, 241, 245, 248,
            252, 257, 261, 265, 270, 274, 278, 281, 285, 289,
            292, 295, 298, 301, 304, 307, 309, 311, 313, 315
        ];

        // 차트 데이터 적용
        compareChart.setData(baseData);
        compareChart.addCompareData(['삼성전자', compareData]);

        // 선 색상 설정
        compareChart.lineDataColor = ['#00cfff', '#ff6600'];
    }
```

<figure><img src="../../.gitbook/assets/화면 녹화 중 2025-07-03 094704.gif" alt=""><figcaption></figcaption></figure>



<mark style="color:red;">**Build 에러 발생 시**</mark>

1. _**프로젝트 트리뷰에서 Framework > afc 우클릭 > Default Load Settings.. > library + Component > ADataMask.js 체크**_
2. _**프로젝트 트리뷰에서 Framework > stock우클릭 > Default Load Settings.. > Component > CompareChart.js 체크**_

<div><figure><img src="../../.gitbook/assets/스크린샷 2025-07-03 094853.png" alt=""><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/스크린샷 2025-07-03 094910.png" alt=""><figcaption></figcaption></figure></div>

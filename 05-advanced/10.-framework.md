# 10. Framework 생성하기

<div align="left"><figure><img src="../.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure></div>

스파이더젠에서 프레임워크를 생성하는 매뉴얼

## Example

<figure><img src="../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

* Project Type: FrameworkGen으로 지정 > Project Name 설정(ex: newComp)



<div align="left"><figure><img src="../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure></div>

* 프로젝트 생성



<div align="left"><figure><img src="../.gitbook/assets/image (5).png" alt=""><figcaption></figcaption></figure></div>

* 생성한 Project Name으로 된 폴더에서 우클릭 -> Add Component 클릭



<div align="left"><figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure> <figure><img src="../.gitbook/assets/스크린샷 2025-07-14 131637.png" alt=""><figcaption></figcaption></figure></div>

* Name에 새로 생성할 컴포넌트의 이름 지정하고 Base Class에서 상속받을 컴포넌트 선택 -> OK



<div align="left"><figure><img src="../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure></div>

* 폴더에 js 파일 생성



* newButtonAttrProp.js

```javascript

(async function () {

    await afc.import("Framework/afc/attribute/AButton/AButtonAttrProp.js");

    class newButtonAttrProp extends AButtonAttrProp {
        constructor() {
            super();
        }

        init(context, evtListener) {
            super.init(context, evtListener);

            this.makeAttrItem('newComp', 'newButton');
        }

        applyValueToSelComp(selComp, dataKey, valGroup, value) {
            if (valGroup === 'ATTR_VALUE') {
                if (dataKey.startsWith('data-')) {
                    selComp.setAttr(dataKey, value);

                    // 필요 시 커스텀 속성 대응
                    if (dataKey === 'data-myprop') {
                        selComp.setMyCustomOption?.(value);
                    }

                    return;
                }
            }

            return super.applyValueToSelComp(selComp, dataKey, valGroup, value);
        }

        updateACheckBox(dataKey, valueComp, value, selComp) {

            super.updateACheckBox(dataKey, valueComp, value, selComp);
        }
    }

    window.newButtonAttrProp = newButtonAttrProp;

})();
```



* newButtonAttrItems.attr

<div align="left"><figure><img src="../.gitbook/assets/image (139).png" alt=""><figcaption></figcaption></figure></div>

```javascript

window.newButtonAttrItems = function() 
{
    const labelStyle = { width: '35%', height: '100%', textAlign: 'right', marginRight: '5px' },
        viewStyle = { width: '100%', height: '25px', padding: '2px' }

        const attrItems = 
    {
        'Data': 
        {
            name: 'AView',
            style: { width: '100%', height: 'auto', padding: '2px' },
            children:
            [
                {
                    name: 'AView', 
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ALabel',
                            text: 'Text',
                            style: labelStyle,
                        },
                        {
                            name: 'ATextField',
                            id: "Text",
                            group: 'SET_VALUE',
                            event: 'change',
                            listener: 'onTextValueChange',
                            style: { width: '60%', height: '100%' }
                        }
                    ]
                },

                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ALabel',
                            text: 'Align',
                            style: labelStyle,
                        },
                        {
                            name: 'ASelectBox',
                            id: "text-align",
                            group: 'CSS_VALUE',
                            event: 'change',
                            listener: 'onSelectValueChange',
                            style: { width: '60%', height: '100%' },
                            items : [ ['left','left'], ['center','center'], ['right','right'] ]
                        }
                    ]
                },
                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ALabel',
                            text: 'Icon',
                            style: labelStyle,
                        },
                        {
                            name: 'ATextField',
                            id: "Image",
                            group: 'SET_VALUE',
                            event: 'change',
                            listener: 'onTextValueChange',
                            style: { width: '50%', height: '100%', marginRight: '2px' }
                        },
                        {
                            name: 'AButton',
                            text: '...',
                            event: 'click',
                            listener: 'onImagePickerClick',
                            style: { width: '25px', height: '100%' }
                        }
                    ]
                },

                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ACheckBox',
                            text: 'After Text',
                            id: 'data-aftertext',
                            group: 'ATTR_VALUE',
                            event: 'click',
                            listener: 'onCheckBtnClick',
                            style: { marginLeft:'calc(30% + 5px)', width: 'auto', height: '100%', display: 'inline-block' }
                        }
                    ]
                },

                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ACheckBox',
                            text: 'New Line Text',
                            id: 'data-newline',
                            group: 'ATTR_VALUE',
                            event: 'click',
                            listener: 'onCheckBtnClick',
                            style: { marginLeft:'calc(30% + 5px)', width: 'auto', height: '100%', display: 'inline-block' }
                        }
                    ]
                },

                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ALabel',
                            text: 'Icon Margin',
                            style: labelStyle,
                        },
                        {
                            name: 'ATextField',
                            placeholder: 'top right bottom left',
                            id: "IconMargin",
                            group: 'SET_VALUE',
                            event: 'change',
                            listener: 'onTextValueChange',
                            style: { width: '60%', height: '100%' }
                        }
                    ]
                },

                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ALabel',
                            text: 'Icon Size',
                            style: labelStyle,
                        },
                        {
                            name: 'ATextField',
                            placeholder: '50px 100%',
                            id: "IconSize",
                            group: 'SET_VALUE',
                            event: 'change',
                            listener: 'onTextValueChange',
                            style: { width: '60%', height: '100%' }
                        }
                    ]
                },

            ]
        },

        'Option': 
        {
            name: 'AView',
            style: { width: '100%', height: 'auto', padding: '2px' },
            children:
            [
                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ACheckBox',
                            text: 'Fast Click',
                            id: 'data-speed-button',
                            group: 'ATTR_VALUE',
                            event: 'click',
                            listener: 'onCheckBtnClick',
                            style: { width: '50%', height: '100%', display: 'inline-block' }
                        },
                        {
                            name: 'ACheckBox',
                            text: 'Tool Button',
                            id: 'data-tool-button',
                            group: 'ATTR_VALUE',
                            event: 'click',
                            listener: 'onCheckBtnClick',
                            style: { width: '50%', height: '100%', display: 'inline-block' }
                        }
                    ]
                },
                {
                    name: 'AView',
                    style: viewStyle,
                    children:
                    [
                        {
                            name: 'ACheckBox',
                            text: 'Check Button',
                            id: 'data-check-button',
                            group: 'ATTR_VALUE',
                            event: 'click',
                            listener: 'onCheckBtnClick',
                            style: { width: '50%', height: '100%', display: 'inline-block' }
                        },
                        {
                            name: 'ACheckBox',
                            text: 'Off DownState',
                            id: 'data-off-downstate',
                            group: 'ATTR_VALUE',
                            event: 'click',
                            listener: 'onCheckBtnClick',
                            style: { width: '50%', height: '100%', display: 'inline-block' }
                        }
                    ]
                },            
            ]
        }    
    }

    return attrItems

}


```



* newButton.js

```javascript

(async function () {

    // 부모 컴포넌트인 AButton 로드
    await afc.import("Framework/afc/component/AButton.js");

    class newButton extends AButton {
        static CONTEXT = {
            tag: '<button data-base="newButton" data-class="newButton" class="AButton-Style newButton-Style">NewButton</button>',

            defStyle: {
                width: '100px',
                height: '28px'
            },

            // 기본 click, longtab 외에 사용자 정의 이벤트 추가 가능
            events: ['click', 'longtab', 'myclick']
        };

        constructor() {
            super();
            this.frwName = 'newComp';  // 속성 에디터 쪽에서 연결할 프레임워크 명칭
        }

        init(context, evtListener) {
            super.init(context, evtListener);

            // 예시: 컴포넌트에 기본 텍스트 설정
            if (!this.getText()) this.setText('New Button');
        }

        setOption(option) {
            super.setOption(option);

            if (option.myProp !== undefined) {
                this.setMyCustomOption(option.myProp);
            }
        }

        // 확장된 동작 예시: 커스텀 속성 처리
        setMyCustomOption(value) {
            this.myCustomValue = value;
            this.setAttr('data-myprop', value);
        }

        getMyCustomOption() {
            return this.myCustomValue || this.getAttr('data-myprop');
        }

        // 이벤트 확장
        triggerMyClick() {
            this.reportEvent('myclick');
        }

        // 기존 기능 오버라이딩 (예: 클릭 시 사용자 동작)
        onClick(e) {
            super.onClick?.(e); // AButton에 click 핸들러가 있다면 호출

            // 사용자 정의 동작 추가
            console.log('newButton clicked');
            this.triggerMyClick();  // myclick 이벤트 발생
        }
    }

    // 전역에 등록
    window.newButton = newButton;

})();

```



newButtonEvent.js

```javascript

(async function () {

    // AButtonEvent 불러오기
    await afc.import("Framework/afc/event/AButtonEvent.js");

    class newButtonEvent extends AButtonEvent {
        constructor(acomp) {
            super(acomp);
        }

        // 외부에 노출되는 이벤트 인터페이스 (컨트롤러가 이 함수를 호출함)
        myclick() {
            this._myclick();
        }

        // 내부 구현 함수
       _myclick() {
            const acomp = this.acomp;

            if (this._clickBound) return;
            this._clickBound = true;

            const el = acomp.el; // DOM 요소여야 함

            el.addEventListener('click', (e) => {
                acomp.reportEvent('myclick', null, e);

                const proto = el.getAttribute('data-proto') || 'https';
                const link = el.getAttribute('data-link') || 'www.spidergen.org';

                window.open(`${proto}://${link}`, 'newButton');
            });
        }
    }

    window.newButtonEvent = newButtonEvent;

})();
```







<figure><img src="../.gitbook/assets/image (136).png" alt=""><figcaption></figcaption></figure>



<div align="left"><figure><img src="../.gitbook/assets/image (137).png" alt=""><figcaption></figcaption></figure></div>



<div align="left"><figure><img src="../.gitbook/assets/image (138).png" alt=""><figcaption></figcaption></figure></div>



<div align="left"><figure><img src="../.gitbook/assets/스크린샷 2025-07-15 095547.png" alt=""><figcaption></figcaption></figure></div>



<figure><img src="../.gitbook/assets/스크린샷 2025-07-15 095725.png" alt=""><figcaption></figcaption></figure>



<div align="left"><figure><img src="../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure></div>
